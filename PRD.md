这份需求文档旨在将你的构思转化为一份可落地的产品蓝图。作为前端工程师，你可能更关注逻辑的严密性、数据的流转以及交互的边界，因此我在这份文档中强化了**数据结构定义**和**核心逻辑流程**。

---

# 📅 个人生产力操作系统 (Personal OS) 需求规格文档

## 1. 产品愿景

打造一个从**捕捉（AI输入）**、**执行（日历/清单）**、**专注（番茄钟）**到**回顾（日记/报表）**的闭环系统，解决任务分散、目标感缺失和复盘难的问题。

---

## 2. 核心功能模块

### 2.1 任务管理引擎 (Task Engine)

* **任务属性：** 标题、备注、分类标签、优先级（高/中/低）、状态（待办/进行中/已完成/已跳过）。
* **时间维度：**
* **无日期任务：** 放入“收件箱 (Inbox)”，不显示在日历上。
* **单次任务：** 设定具体日期或 Deadline。
* **周期任务：** 支持 RRULE 标准（每日、工作日、每周、每月固定日期等）。


* **子任务拆解：** 主任务下支持创建多级 Checkbox 清单。

### 2.2 智能日历视图 (Smart Calendar)

* **集成显示：** 日历格内混合显示“时间轴任务”（有具体点）和“全天任务”（无具体点）。
* **状态联动：** 勾选完成的任务在日历上自动变为“已完成”视觉状态（划线/半透明）。
* **交互逻辑：** * 支持**拖拽 (Drag & Drop)**：将任务从右侧收件箱拖入日历某个日期。
* 支持**拉伸**：在周视图下，通过拉伸任务色块修改任务持续时间。



### 2.3 个人计划模块 (Planning)

* **目标看板：** 设定长线目标（如：3个月学会 React Native）。
* **进度条：** 根据该目标关联的子任务完成情况，自动计算百分比进度。
* **甘特图简版：** 横向展示多个计划的时间跨度。

### 2.4 AI 辅助模块 (AI Integration)

* **NLP 解析：** * 输入：“明天下午5点开周会 #工作”。
* 结果：`{ title: "开周会", time: "2026-01-07 17:00", tags: ["工作"] }`。


* **语音录入：** 集成语音转文字，并自动触发 NLP 逻辑。

### 2.5 自动日记与复盘 (Auto-Journal)

* **内容聚合：** 每天晚上 12:00 自动拉取该日期下所有 `status === 'done'` 的任务，生成成就清单。
* **编辑器：** 支持 Markdown 格式，记录心得。
* **数据可视化：** 展示“专注热力图”（类似 GitHub Contributions），增强成就感。

---

## 3. 用户流程图 (User Flow)

1. **输入阶段：** 用户通过语音/快捷键呼出 AI 输入框 -> 快速创建任务。
2. **规划阶段：** 在日历/看板视图中拖拽任务，排布优先级。
3. **执行阶段：** 点击任务开启番茄钟（可选） -> 专注工作。
4. **沉淀阶段：** 任务完成后自动归档 -> 进入日记模块撰写总结。

---

## 4. 数据实体设计 (Entity Relationship)

作为前端开发者，你可以参考以下 Schema 结构来规划你的数据库（如 IndexedDB 或 Prisma）：

| 实体 | 关键字段 | 说明 |
| --- | --- | --- |
| **User** | id, name, settings, theme | 用户基本信息及配置 |
| **Task** | id, title, desc, status, priority, startTime, deadline, isRecurring, rrule | 任务核心表 |
| **Project** | id, title, color, progress, startDate, endDate | 长期计划/项目表 |
| **Journal** | id, date, content, mood, taskSnapshot(JSON) | 日记表，快照记录当天任务 |
| **Tag** | id, name, color | 用于筛选和分类的标签 |

---

## 5. 扩展性需求 (Non-functional)

* **跨端同步：** 采用 Local-first 架构，优先本地存储，联网后异步同步至服务器。
* **离线编辑：** 确保在地铁、飞行模式下依然可以增删改查。
* **性能优化：** 日历在渲染大量周期性任务时，需做虚拟列表处理，避免 DOM 节点过多导致卡顿。
* **隐私：** 日记内容支持本地加密存储。

---

## 6. 后续迭代建议 (Roadmap)

* **V1 (MVP):** 实现基础清单、手动日记、简易月历、NLP 文本解析。
* **V2:** 增加周期性任务逻辑、语音输入、番茄钟、数据统计报表。
* **V3:** 引入 AI 智能建议（如：AI 发现你最近周三总是没空，建议你将周三的任务推迟）。

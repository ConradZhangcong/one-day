# 产品需求文档

## 1. 产品概述

### 1.1 产品定位
一款集待办任务管理、日记记录于一体的时间管理应用，通过智能语音录入和AI分析能力，帮助用户高效管理日常任务，规划长期目标，并记录生活轨迹。

### 1.2 目标用户
- 需要管理日常待办任务的职场人士
- 有长期目标规划需求的个人用户
- 希望通过日记记录生活轨迹的用户
- 偏好语音输入和AI辅助的用户

### 1.3 核心价值
- **高效任务管理**：灵活的任务创建和管理方式，支持单次、重复和长期任务
- **智能规划**：结合日历视图，直观展示任务时间分布
- **生活记录**：通过日记功能记录每日完成任务，形成个人成长轨迹
- **便捷输入**：语音录入和AI分析，降低任务创建成本

---

## 2. 功能需求

### 2.1 待办任务管理

#### 2.1.1 任务创建
**功能描述：** 用户可以创建待办任务，支持多种任务类型和时间设置。

**详细需求：**
- **基础信息：**
  - 任务标题（必填）
  - 任务描述/备注（可选）
  - 任务分类/标签（可选）
  - 优先级设置（高/中/低，可选）
  - 任务类型：单次任务、重复任务、长期任务

- **时间设置：**
  - **无日期关联任务：** 不设置具体日期，放入"收件箱"或"待办清单"
  - **单次任务：** 设置具体日期和/或时间点
  - **重复任务：** 支持以下重复模式：
    - 按次数重复：设置重复次数（如：重复5次）
    - 按时间段重复：设置开始日期和结束日期，在时间段内按规则重复
    - 按时间间隔重复：每个特定时间重复一次
      - 每天重复
      - 每周重复（可指定星期几）
      - 每月重复（可指定日期）
      - 每年重复
      - 工作日重复
      - 自定义间隔（如：每3天、每2周等）
  - **长期任务：** 设置开始日期和结束日期，可关联多个子任务，通过子任务完成情况自动计算进度
  - **截止时间（Deadline）：** 可选设置任务的截止日期和时间

**用户场景：**
- 用户创建"明天下午3点开会"的单次任务
- 用户创建"每周一早上9点团队例会"的重复任务
- 用户创建"每天运动30分钟"的每日重复任务，设置持续1个月
- 用户创建"学习新技能"的无日期任务，放入待办清单
- 用户创建"3个月学会React Native"的长期任务，并关联多个学习子任务

#### 2.1.2 任务编辑与删除
**功能描述：** 用户可以修改已创建的任务信息，或删除不需要的任务。

**详细需求：**
- 支持修改任务的所有属性（标题、描述、时间、优先级、类型等）
- 对于重复任务，支持：
  - 修改单次实例（仅影响当前这次）
  - 修改整个系列（影响所有未来实例）
  - 删除单次实例
  - 删除整个系列
- 对于长期任务，支持：
  - 关联子任务
  - 查看子任务完成情况
  - 自动计算进度
- 支持批量操作（批量删除、批量修改标签等）

#### 2.1.3 任务完成与归档
**功能描述：** 任务完成后，可以标记为已完成并归档到已办任务中。

**详细需求：**
- **任务完成：**
  - 支持手动标记任务为"已完成"状态
  - 已完成的任务在待办列表中显示为已完成状态（如：划线、半透明等视觉标识）
  - 已完成的任务自动记录完成时间
  - 长期任务的子任务完成时，自动更新长期任务的进度
  
- **任务归档：**
  - 已完成的任务可以归档到"已办任务"模块
  - 归档后的任务从待办列表中移除，但保留在已办任务历史中
  - 支持查看已办任务列表，可按日期、分类等维度筛选
  - 已办任务支持取消归档（重新回到待办状态）

**用户场景：**
- 用户完成"提交周报"任务后，点击完成按钮，任务自动归档到已办任务
- 用户可以在已办任务中查看本周完成的所有任务
- 用户发现误操作，可以将已归档的任务取消归档
- 用户完成长期任务的所有子任务后，长期任务自动标记为已完成

#### 2.1.4 任务列表与筛选
**功能描述：** 提供多种视图和筛选方式，方便用户查看和管理任务。

**详细需求：**
- **列表视图：**
  - 待办任务列表（未完成的任务）
  - 已办任务列表（已完成并归档的任务）
  - 收件箱（无日期关联的任务）
  
- **筛选与排序：**
  - 按日期筛选（今天、本周、本月、自定义日期范围）
  - 按优先级筛选
  - 按分类/标签筛选
  - 按任务类型筛选（单次、重复、长期）
  - 按状态筛选（待办、进行中、已完成）
  - 支持多条件组合筛选
  - 支持按创建时间、截止时间、优先级等排序

#### 2.1.5 长期任务进度跟踪
**功能描述：** 对于长期任务，自动或手动跟踪执行进度。

**详细需求：**
- **进度计算：**
  - 根据关联子任务的完成情况自动计算长期任务完成百分比
  - 支持手动设置长期任务进度
  - 显示长期任务剩余天数/周数
  
- **进度可视化：**
  - 进度条展示长期任务完成百分比
  - 显示已完成的子任务数量/总子任务数量
  - 支持甘特图视图，展示多个长期任务的时间跨度

---

### 2.3 日记功能

#### 2.3.1 日记创建与编辑
**功能描述：** 用户可以记录每日完成的事项和心得体会。

**详细需求：**
- **日记内容：**
  - 日记日期（默认当天，可修改）
  - 日记标题（可选）
  - 日记正文（支持富文本或Markdown格式）
  - 心情/情绪标签（可选）
  - 日记分类/标签（可选）

- **内容来源：**
  - 手动输入日记内容
  - 自动关联已办任务：系统自动拉取当天完成的任务，生成"今日完成任务"列表
  - 支持手动选择关联的已办任务
  - 支持从已办任务中提取信息，自动填充日记内容

**用户场景：**
- 用户完成多个任务后，打开日记功能，系统自动列出今天完成的所有任务
- 用户在此基础上添加心得体会，形成完整的日记
- 用户也可以完全手动创建日记，记录与任务无关的内容

#### 2.3.2 日记查看与回顾
**功能描述：** 用户可以查看历史日记，回顾过往记录。

**详细需求：**
- **日记列表：**
  - 按日期顺序展示所有日记
  - 支持日历视图，点击日期查看对应日记
  - 支持按月份、年份筛选
  
- **日记详情：**
  - 查看单篇日记的完整内容
  - 显示关联的已办任务列表
  - 支持编辑和删除日记

#### 2.3.3 日记统计与分析
**功能描述：** 提供日记相关的数据统计和可视化。

**详细需求：**
- 统计日记记录天数
- 展示日记记录热力图（类似GitHub Contributions）
- 统计最常记录的心情/情绪
- 分析任务完成趋势（结合已办任务数据）

---

### 2.4 日历展示

#### 2.4.1 日历视图
**功能描述：** 提供日历视图，直观展示任务的时间分布。

**详细需求：**
- **视图类型：**
  - 月视图：显示整月的日历，任务以标记或色块形式显示在对应日期
  - 周视图：显示一周的详细时间轴，任务按时间点显示
  - 日视图：显示单日的详细时间轴，精确到小时
  
- **任务展示：**
  - 在日历上显示待办任务（有具体时间的任务显示在对应时间点，全天任务显示在日期顶部）
  - 在日历上显示已办任务（以不同视觉样式区分，如半透明、划线等）
  - 支持任务颜色标识（按优先级、分类、类型等）
  - 支持显示任务标题或简化标识
  - 长期任务在日历上显示为时间跨度条

#### 2.4.2 日历交互
**功能描述：** 支持在日历上进行任务的创建、查看和简单操作。

**详细需求：**
- **任务创建：**
  - 点击日历上的日期或时间点，快速创建任务
  - 支持拖拽创建：在日历上拖拽选择时间段，创建对应时长的任务
  - 创建任务时，日期和时间自动填充为点击/拖拽的位置
  
- **任务查看：**
  - 点击日历上的任务，查看任务详情
  - 在日历上直接查看已办任务的简要信息
  - 点击长期任务，查看关联的子任务列表
  
- **任务操作：**
  - 在日历上直接标记任务为已完成
  - 支持拖拽任务到其他日期，修改任务日期
  - 支持在日历上快速编辑任务（如修改时间、标题等）

**用户场景：**
- 用户在月视图中看到本周任务分布，发现周三任务较多
- 用户点击日历上的某个时间点，快速创建"下午3点会议"任务
- 用户将任务从周三拖拽到周四，调整任务日期
- 用户在日历上点击已完成的任务，查看任务详情

---

### 2.5 语音录入与AI分析

#### 2.5.1 语音录入
**功能描述：** 支持通过语音输入创建任务和记录内容。

**详细需求：**
- **语音识别：**
  - 支持实时语音转文字
  - 支持多语言识别（至少支持中文和英文）
  - 支持语音输入过程中的实时文字预览
  - 支持语音输入后的文字编辑和修正
  
- **输入场景：**
  - 通过语音创建待办任务
  - 通过语音创建日记内容
  - 通过语音快速记录想法（可后续转换为任务）

#### 2.5.2 AI分析记录
**功能描述：** 通过AI分析语音或文字输入，自动提取信息并创建结构化任务。

**详细需求：**
- **自然语言理解：**
  - 识别时间信息：从输入中提取日期、时间点、时间段
    - 示例："明天下午5点开会" → 提取日期：明天，时间：17:00
    - 示例："每周一早上9点团队例会" → 提取重复规则：每周一，时间：09:00
    - 示例："3个月学会React Native" → 识别为长期任务，提取时间跨度
  - 识别任务类型：判断是单次任务、重复任务还是长期任务
  - 识别任务属性：提取任务标题、描述、优先级、分类标签等
  - 识别截止时间：从输入中提取deadline信息
  
- **智能填充：**
  - 根据AI分析结果，自动填充任务表单
  - 自动设置任务的日期、时间、重复规则等
  - 自动提取并设置任务分类标签
  - 用户可确认或修改AI分析的结果

- **上下文理解：**
  - 理解相对时间表达（如：明天、下周、下个月）
  - 理解模糊时间表达（如：早上、下午、晚上）
  - 理解重复规则表达（如：每天、每周、每月）
  - 理解长期目标表达（如：3个月、半年、一年）

**用户场景：**
- 用户说："明天下午5点开周会 #工作"，AI自动创建任务：标题"开周会"，日期明天，时间17:00，标签"工作"
- 用户说："每周一早上9点团队例会，持续到年底"，AI自动创建重复任务：每周一09:00，结束日期为年底
- 用户说："记得给客户发邮件，deadline是周五"，AI自动创建任务：标题"给客户发邮件"，截止时间本周五
- 用户说："3个月学会React Native，包含学习基础、完成项目等"，AI自动创建长期任务，并识别可能的子任务
- 用户说："今天完成了项目上线，感觉很棒"，AI自动识别为日记内容，并关联"项目上线"任务（如果存在）

#### 2.5.3 AI辅助建议
**功能描述：** AI基于用户历史数据，提供智能建议和提醒。

**详细需求：**
- **任务建议：**
  - 基于历史任务完成情况，建议最佳任务时间
  - 发现任务冲突时，建议调整时间
  - 基于任务类型，建议合适的优先级
  
- **长期任务建议：**
  - 基于子任务完成情况，评估长期任务进度
  - 发现长期任务可能延期时，提前提醒
  - 建议长期任务调整方案

---

## 3. 非功能需求

### 3.1 性能要求
- 应用启动时间应小于3秒
- 任务列表加载时间应小于1秒
- 日历视图切换应流畅，无明显卡顿
- 语音识别响应时间应小于2秒

### 3.2 可用性要求
- 界面简洁直观，新用户可在5分钟内掌握基本操作
- 支持快捷键操作，提高效率
- 提供操作引导和帮助文档
- 支持深色模式和浅色模式切换

### 3.3 数据安全
- 用户数据本地存储，支持数据导出
- 支持数据备份和恢复
- 日记等敏感内容支持加密存储
- 尊重用户隐私，不未经授权上传用户数据

### 3.4 兼容性要求
- 支持主流操作系统（iOS、Android、Web）
- 支持不同屏幕尺寸和分辨率
- 支持离线使用（核心功能）

---

## 4. 用户场景示例

### 场景1：早晨规划一天
**用户：** 上班族小王  
**场景：** 早上8点，小王打开应用，查看今天的待办任务。在日历视图中看到今天有3个会议和2个待办任务。他通过语音说："下午3点记得给客户发邮件 #工作"，AI自动创建了任务并添加到日历中。

### 场景2：创建重复任务
**用户：** 学生小李  
**场景：** 小李想要养成每天运动的习惯，他创建了一个"每天运动30分钟"的重复任务，设置从今天开始，持续1个月。系统自动在日历上生成了30个任务实例。

### 场景3：任务完成与日记
**用户：** 自由职业者小张  
**场景：** 晚上10点，小张完成了今天的所有任务。他打开日记功能，系统自动列出了今天完成的5个任务。他在此基础上添加了今天的心得体会："今天效率很高，完成了项目初稿，明天继续优化。"

### 场景4：长期任务跟踪
**用户：** 职场新人小赵  
**场景：** 小赵创建了"3个月学会Python编程"的长期任务，并关联了多个学习子任务。每周他都会查看任务进度，看到进度条从20%增长到45%，很有成就感。

### 场景5：日历调整任务
**用户：** 项目经理小刘  
**场景：** 小刘在周视图中看到周三任务太多，他将一个不紧急的任务从周三拖拽到周四，轻松调整了任务安排。在月视图中，他可以看到整个月的任务分布，合理安排工作节奏。

---

## 5. 功能优先级

### P0（核心功能，MVP必须包含）
1. 待办任务创建、编辑、删除
2. 任务完成与归档
3. 基础日历视图（月视图）
4. 日记创建与查看


### P1（重要功能，V1版本包含）
1. 重复任务（基础重复规则）
2. 长期任务创建与进度跟踪
3. 日历任务创建和拖拽调整
4. AI分析记录（基础NLP解析）
5. 已办任务与日记关联
6. 基础语音录入（语音转文字）

### P2（增强功能，V2版本包含）
1. 高级重复规则（自定义间隔、工作日等）
2. 日历周视图和日视图
3. AI辅助建议
4. 日记统计和可视化
5. 任务筛选和排序

### P3（优化功能，后续版本）
1. 长期任务甘特图视图
2. 高级AI分析（上下文理解、智能建议）
3. 数据导出和报表
4. 多设备同步

---

## 6. 边界说明

### 6.1 不在本版本范围的功能
- 团队协作和任务共享
- 任务评论和讨论
- 文件附件管理
- 第三方应用集成（如：邮件、日历应用）
- 任务模板和快速创建
- 番茄钟专注功能（如需要可后续扩展）

### 6.2 假设条件
- 用户具备基本的智能手机或电脑使用能力
- 用户网络环境稳定（用于语音识别和AI分析，但核心功能支持离线）
- AI服务可用（用于语音识别和自然语言分析）

---

## 7. 成功指标

### 7.1 用户指标
- 日活跃用户数（DAU）
- 任务创建数量（平均每用户每天创建任务数）
- 任务完成率（完成任务数/创建任务数）
- 日记记录频率（平均每用户每周记录日记次数）

### 7.2 功能使用指标
- 语音录入使用率（使用语音创建任务的比例）
- AI分析准确率（AI正确解析任务信息的比例）
- 日历视图使用率（使用日历视图的用户比例）
- 长期任务功能使用率（创建长期任务的用户比例）

---

## 8. 附录

### 8.1 术语表
- **待办任务：** 用户需要完成的任务，可以是单次、重复或长期的
- **已办任务：** 已完成并归档的任务
- **单次任务：** 只执行一次的任务
- **重复任务：** 按照一定规则重复出现的任务
- **长期任务：** 有明确时间跨度（通常3个月以上）的目标，可关联多个子任务
- **子任务：** 长期任务下关联的具体执行任务
- **日记：** 用户记录每日完成任务和心得体会的内容
- **归档：** 将已完成的任务从待办列表移动到已办任务历史

### 8.2 参考示例
- 任务标题示例："提交周报"、"团队例会"、"学习React基础"、"3个月学会React Native"
- 重复规则示例：每天、每周一、每月1号、每3天、工作日
- 长期任务示例："3个月学会React Native"、"本月完成项目上线"

